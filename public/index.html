<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPPER+ Payment</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#0A8FDC">
</head>
<body>
    <div class="app-container">
        <!-- ဟေဒါ -->
        <header class="app-header">
            <div class="logo">
                <img src="https://github.com/Opper125/opper-payment/raw/main/logo.png" alt="OPPER+ Logo">
                <h1>OPPER+</h1>
            </div>
            <div class="user-info" id="userInfo">
                <span id="userBalance">0.00 MMK</span>
                <div class="avatar" id="userAvatar">
                    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="User">
                </div>
            </div>
        </header>

        <!-- အကောင့်ဝင်ရန် ဖန်သားပြင် -->
        <div class="auth-container" id="authScreen">
            <div class="auth-card">
                <div class="tabs">
                    <button class="tab active" id="loginTab">အကောင့်ဝင်ရန်</button>
                    <button class="tab" id="registerTab">အကောင့်အသစ်ဖွင့်ရန်</button>
                </div>
                
                <div class="auth-form" id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">အီးမေးလ်</label>
                        <input type="email" id="loginEmail" placeholder="သင့်အီးမေးလ်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">စကားဝှက်</label>
                        <input type="password" id="loginPassword" placeholder="သင့်စကားဝှက်ထည့်ပါ">
                    </div>
                    <button class="btn btn-primary" id="loginButton">အကောင့်ဝင်ရန်</button>
                </div>
                
                <div class="auth-form hidden" id="registerForm">
                    <div class="form-group">
                        <label for="registerEmail">အီးမေးလ်</label>
                        <input type="email" id="registerEmail" placeholder="အီးမေးလ်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">စကားဝှက်</label>
                        <input type="password" id="registerPassword" placeholder="စကားဝှက်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="registerPhone">ဖုန်းနံပါတ်</label>
                        <input type="tel" id="registerPhone" placeholder="09xxxxxxxxx">
                    </div>
                    <button class="btn btn-primary" id="registerButton">အကောင့်ဖွင့်ရန်</button>
                </div>
            </div>
        </div>

        <!-- အဓိက ဖန်သားပြင် -->
        <main class="main-container hidden" id="mainScreen">
            <!-- အမြန်လွှဲခလုပ်များ -->
            <div class="quick-actions">
                <div class="action-card" id="topupButton">
                    <div class="icon">
                        <img src="https://cdn-icons-png.flaticon.com/512/2489/2489756.png" alt="ငွေဖြည့်">
                    </div>
                    <span>ငွေဖြည့်</span>
                </div>
                <div class="action-card" id="transferButton">
                    <div class="icon">
                        <img src="https://cdn-icons-png.flaticon.com/512/5454/5454292.png" alt="ငွေလွှဲ">
                    </div>
                    <span>ငွေလွှဲ</span>
                </div>
                <div class="action-card" id="historyButton">
                    <div class="icon">
                        <img src="https://cdn-icons-png.flaticon.com/512/2356/2356780.png" alt="မှတ်တမ်း">
                    </div>
                    <span>မှတ်တမ်း</span>
                </div>
                <div class="action-card" id="profileButton">
                    <div class="icon">
                        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077063.png" alt="ပရိုဖိုင်">
                    </div>
                    <span>ပရိုဖိုင်</span>
                </div>
            </div>

            <!-- ငွေလွှဲမှု အကျဉ်းချုပ် -->
            <div class="transaction-summary">
                <h3>လတ်တလော ငွေလွှဲမှုများ</h3>
                <div class="transaction-list" id="transactionList">
                    <!-- ငွေလွှဲမှုများကို JavaScript ဖြင့် ဖော်ပြမည် -->
                    <div class="empty-state">လတ်တလော ငွေလွှဲမှုမရှိသေးပါ</div>
                </div>
            </div>

            <!-- ဝန်ဆောင်မှုများ -->
            <div class="services-section">
                <h3>ဝန်ဆောင်မှုများ</h3>
                <div class="services-grid">
                    <div class="service-card" onclick="showService('internet')">
                        <div class="icon"><img src="https://cdn-icons-png.flaticon.com/512/3028/3028582.png" alt="အင်တာနက်"></div>
                        <span>အင်တာနက်</span>
                    </div>
                    <div class="service-card" onclick="showService('electricity')">
                        <div class="icon"><img src="https://cdn-icons-png.flaticon.com/512/1598/1598673.png" alt="လျှပ်စစ်"></div>
                        <span>လျှပ်စစ်</span>
                    </div>
                    <div class="service-card" onclick="showService('water')">
                        <div class="icon"><img src="https://cdn-icons-png.flaticon.com/512/1748/1748687.png" alt="ရေ"></div>
                        <span>ရေဖိုး</span>
                    </div>
                    <div class="service-card" onclick="showService('donation')">
                        <div class="icon"><img src="https://cdn-icons-png.flaticon.com/512/3349/3349234.png" alt="အလှူငွေ"></div>
                        <span>အလှူပြုရန်</span>
                    </div>
                </div>
            </div>
        </main>

        <!-- ငွေလွှဲ ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="transferScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideSection('transferScreen')">←</button>
                <h2>ငွေလွှဲရန်</h2>
            </div>
            <div class="overlay-content">
                <div class="form-group">
                    <label for="receiverPhone">လက်ခံမည့်ဖုန်းနံပါတ်</label>
                    <input type="tel" id="receiverPhone" placeholder="09xxxxxxxxx">
                </div>
                <div class="form-group">
                    <label for="transferAmount">ငွေပမာဏ (MMK)</label>
                    <input type="number" id="transferAmount" placeholder="0">
                </div>
                <div class="form-group">
                    <label for="transferNote">မှတ်ချက်</label>
                    <input type="text" id="transferNote" placeholder="မှတ်ချက်ရေးရန် (မဖြစ်မနေမဟုတ်ပါ)">
                </div>
                <button class="btn btn-primary" id="confirmTransferButton">ငွေလွှဲမည်</button>
            </div>
        </div>

        <!-- မှတ်တမ်း ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="historyScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideSection('historyScreen')">←</button>
                <h2>ငွေလွှဲမှုမှတ်တမ်း</h2>
            </div>
            <div class="overlay-content">
                <div class="history-filter">
                    <button class="filter-btn active" data-filter="all">အားလုံး</button>
                    <button class="filter-btn" data-filter="in">ဝင်ငွေ</button>
                    <button class="filter-btn" data-filter="out">ထွက်ငွေ</button>
                </div>
                <div class="history-list" id="historyList">
                    <!-- ငွေလွှဲမှုမှတ်တမ်းများကို JavaScript ဖြင့် ဖော်ပြမည် -->
                </div>
            </div>
        </div>

        <!-- ပရိုဖိုင် ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="profileScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideSection('profileScreen')">←</button>
                <h2>ပရိုဖိုင်</h2>
            </div>
            <div class="overlay-content">
                <div class="profile-summary">
                    <div class="profile-avatar">
                        <img id="profileAvatar" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="User">
                    </div>
                    <h3 id="profileName">အမည်</h3>
                    <p id="profilePhone">09xxxxxxxxx</p>
                    <p id="profileEmail">email@example.com</p>
                </div>
                
                <div class="profile-actions">
                    <button class="btn btn-outline" id="verifyIdButton">အိုင်ဒီအတည်ပြုရန်</button>
                    <button class="btn btn-outline" id="changePasswordButton">စကားဝှက်ပြောင်းရန်</button>
                    <button class="btn btn-outline danger" id="logoutButton">အကောင့်ထွက်ရန်</button>
                </div>
            </div>
        </div>

        <!-- ငွေဖြည့် ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="topupScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideSection('topupScreen')">←</button>
                <h2>ငွေဖြည့်ရန်</h2>
            </div>
            <div class="overlay-content">
                <div class="topup-options">
                    <div class="topup-option" data-method="kbz">
                        <img src="https://play-lh.googleusercontent.com/lR5R7jCwIdKlm5CcPs6mSCQXQZmPiBGQ8yHHJsStNxp18Y6W7oLq7MOKQJ4ZlQwKEQ" alt="KBZ Pay">
                        <span>KBZ Pay</span>
                    </div>
                    <div class="topup-option" data-method="wave">
                        <img src="https://play-lh.googleusercontent.com/A7eI9K1nvMyliYWnjnX9L4bRdvnBL0H6Lj3CifTv38D5nyQKPlAxpZe-hHLCyDQm6g" alt="Wave Pay">
                        <span>Wave Money</span>
                    </div>
                    <div class="topup-option" data-method="aya">
                        <img src="https://play-lh.googleusercontent.com/RHfyZ-CMfJrHBTEzxUR_-KjCRDOvJR-tQK1Y5cMYqDy0linBkYBsQmNrOWxTXPAT6V4" alt="AYA Pay">
                        <span>AYA Pay</span>
                    </div>
                    <div class="topup-option" data-method="mpt">
                        <img src="https://play-lh.googleusercontent.com/_ZKgIz-4o2a0mnj1lbCGLvzsMi6Z8v75bXvTeG38KrNFXFd1WUn94RSBaQsRjfo_nSo" alt="MPT Money">
                        <span>MPT Money</span>
                    </div>
                </div>
                
                <div class="topup-form hidden" id="topupForm">
                    <div class="form-group">
                        <label for="topupAmount">ငွေပမာဏ (MMK)</label>
                        <input type="number" id="topupAmount" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="topupPhone">သင့်ဖုန်းနံပါတ်</label>
                        <input type="tel" id="topupPhone" placeholder="09xxxxxxxxx">
                    </div>
                    <button class="btn btn-primary" id="confirmTopupButton">ဆက်လုပ်ရန်</button>
                </div>
            </div>
        </div>

        <!-- ပြေစာပြသည့် ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="receiptScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="closeReceipt()">×</button>
                <h2>ငွေလွှဲဖြတ်ပိုင်း</h2>
            </div>
            <div class="overlay-content">
                <div class="receipt-container" id="receiptContainer">
                    <div class="receipt-header">
                        <img src="https://github.com/Opper125/opper-payment/raw/main/logo.png" alt="OPPER+ Logo">
                        <h2>OPPER+</h2>
                    </div>
                    <div class="receipt-details">
                        <div class="receipt-row">
                            <span class="label">အမျိုးအစား:</span>
                            <span class="value" id="receiptType">ငွေလွှဲမှု</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">ရက်စွဲ:</span>
                            <span class="value" id="receiptDate">2023-10-10 12:30</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">လုပ်ငန်းစဉ်နံပါတ်:</span>
                            <span class="value" id="receiptId">TXN123456789</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">ပို့သူ:</span>
                            <span class="value" id="receiptSender">09123456789</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">လက်ခံသူ:</span>
                            <span class="value" id="receiptReceiver">09987654321</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">ပမာဏ:</span>
                            <span class="value" id="receiptAmount">10,000 MMK</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">မှတ်ချက်:</span>
                            <span class="value" id="receiptNote">-</span>
                        </div>
                        <div class="receipt-row">
                            <span class="label">အခြေအနေ:</span>
                            <span class="value" id="receiptStatus">အောင်မြင်သည်</span>
                        </div>
                    </div>
                    <div class="receipt-footer">
                        <p>OPPER+ မှ ကျေးဇူးတင်ရှိပါသည်</p>
                        <button class="btn btn-sm" id="downloadReceiptButton" onclick="downloadReceipt()">ပြေစာဒေါင်းလုဒ်လုပ်ရန်</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- အိုင်ဒီအတည်ပြုသည့် ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="verifyIdScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideSection('verifyIdScreen')">←</button>
                <h2>အိုင်ဒီအတည်ပြုရန်</h2>
            </div>
            <div class="overlay-content">
                <div class="verify-info">
                    <p>သင်၏ အိုင်ဒီကတ် (မှတ်ပုံတင်) နှင့် ကိုယ်တိုင်ဓာတ်ပုံကို ပေးပို့ရန် လိုအပ်ပါသည်။</p>
                </div>
                
                <div class="verify-form">
                    <div class="form-group">
                        <label for="idCardFile">အိုင်ဒီကတ် (မှတ်ပုံတင်) ဓာတ်ပုံ</label>
                        <input type="file" id="idCardFile" accept="image/*" onchange="previewFile('idCardFile')">
                        <div class="file-preview" id="idCardPreview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="selfieFile">ကိုယ်တိုင်ဓာတ်ပုံ</label>
                        <input type="file" id="selfieFile" accept="image/*" onchange="previewFile('selfieFile')">
                        <div class="file-preview" id="selfiePreview"></div>
                    </div>
                    
                    <button class="btn btn-primary" id="submitVerificationButton">ပေးပို့ရန်</button>
                </div>
            </div>
        </div>

        <!-- ဝန်ဆောင်မှုအသေးစိတ် ဖန်သားပြင် -->
        <div class="overlay-screen hidden" id="serviceDetailScreen">
            <div class="overlay-header">
                <button class="back-button" onclick="hideServiceDetails()">←</button>
                <h2 id="serviceDetailTitle">ဝန်ဆောင်မှု</h2>
            </div>
            <div class="overlay-content">
                <div id="internetService" class="service-detail-content hidden">
                    <div class="form-group">
                        <label for="internetProvider">အင်တာနက်ပေးသွင်းသူ</label>
                        <select id="internetProvider">
                            <option value="">ရွေးချယ်ပါ</option>
                            <option value="mpt">MPT</option>
                            <option value="ooredoo">Ooredoo</option>
                            <option value="mytel">Mytel</option>
                            <option value="atom">Atom</option>
                            <option value="fiber">Myanmar Net</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="internetPhone">ဖုန်းနံပါတ် / အကောင့်နံပါတ်</label>
                        <input type="text" id="internetPhone" placeholder="ဖုန်းနံပါတ် သို့မဟုတ် အကောင့်နံပါတ်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="internetAmount">ငွေပမာဏ (MMK)</label>
                        <input type="number" id="internetAmount" placeholder="0">
                    </div>
                    <button class="btn btn-primary">ပေးဆောင်ရန်</button>
                </div>
                
                <div id="electricityService" class="service-detail-content hidden">
                    <div class="form-group">
                        <label for="electricityMeter">မီတာနံပါတ်</label>
                        <input type="text" id="electricityMeter" placeholder="မီတာနံပါတ်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="electricityAmount">ငွေပမာဏ (MMK)</label>
                        <input type="number" id="electricityAmount" placeholder="0">
                    </div>
                    <button class="btn btn-primary">ပေးဆောင်ရန်</button>
                </div>
                
                <div id="waterService" class="service-detail-content hidden">
                    <div class="form-group">
                        <label for="waterMeter">မီတာနံပါတ်</label>
                        <input type="text" id="waterMeter" placeholder="မီတာနံပါတ်ထည့်ပါ">
                    </div>
                    <div class="form-group">
                        <label for="waterAmount">ငွေပမာဏ (MMK)</label>
                        <input type="number" id="waterAmount" placeholder="0">
                    </div>
                    <button class="btn btn-primary">ပေးဆောင်ရန်</button>
                </div>
                
                <div id="donationService" class="service-detail-content hidden">
                    <div class="form-group">
                        <label for="donationOrg">အဖွဲ့အစည်းရွေးချယ်ပါ</label>
                        <select id="donationOrg">
                            <option value="">ရွေးချယ်ပါ</option>
                            <option value="redcross">ကြက်ခြေနီအသင်း</option>
                            <option value="orphans">မိဘမဲ့ကလေးများရိပ်မွန်</option>
                            <option value="monks">သံဃာဒါန</option>
                            <option value="disaster">သဘာဝဘေးအတွက်ကူညီရန်</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="donationAmount">အလှူငွေပမာဏ (MMK)</label>
                        <input type="number" id="donationAmount" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="donationNote">မှတ်ချက်</label>
                        <input type="text" id="donationNote" placeholder="မှတ်ချက်ရေးရန်">
                    </div>
                    <button class="btn btn-primary">အလှူပြုရန်</button>
                </div>
            </div>
        </div>

        <!-- ပြဿနာ အကြောင်းကြားချက်များ -->
        <div class="alert hidden" id="alertBox">
            <div class="alert-content">
                <p id="alertMessage"></p>
            </div>
            <button class="alert-close" onclick="closeErrorAlert()">×</button>
        </div>
        
        <!-- ဒေါင်းလုဒ် သတိပေးချက် -->
        <div class="download-bar" id="downloadBar">
            <p>ပိုမိုကောင်းမွန်စွာအသုံးပြုရန် OPPER+ အက်ပ်ကို ဒေါင်းလုဒ်လုပ်ပါ။</p>
            <button class="btn btn-sm" onclick="downloadApk()">ဒေါင်းလုဒ်</button>
            <button class="download-close" onclick="hideDownloadBar()">×</button>
        </div>
    </div>
    
    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
    <script src="admin.js"></script>
</body>
</html>
